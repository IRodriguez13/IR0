{
  "subsystems": {
    "KERNEL": {
      "name": "Kernel Core",
      "description": "Core kernel functionality including process management, scheduling, system calls, and error handling. Provides the fundamental kernel services.",
      "required": true,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "kernel/main.c",
          "kernel/init.c",
          "kernel/process.c",
          "kernel/task.c",
          "kernel/syscalls.c",
          "kernel/elf_loader.c",
          "kernel/user.c",
          "kernel/rr_sched.c",
          "kernel/driver_registry.c",
          "kernel/dbgshell.c",
          "kernel/process_util.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "MEMORY": {
      "name": "Memory Management",
      "description": "Memory allocation, paging, virtual memory management, and physical memory manager. Handles physical and virtual memory allocation.",
      "required": true,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "mm/allocator.c",
          "mm/paging.c",
          "mm/kmem.c",
          "mm/pmm.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "INTERRUPT": {
      "name": "Interrupt System",
      "description": "Interrupt handling, IDT/PIC (x86-64) or interrupt controllers (ARM). Essential for hardware event handling.",
      "required": true,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "interrupt/arch/idt.c",
          "interrupt/arch/pic.c",
          "interrupt/arch/isr_handlers.c",
          "interrupt/arch/keyboard.c",
          "interrupt/arch/x86-64/isr_stubs_64.asm"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "FILESYSTEM": {
      "name": "File System",
      "description": "Virtual File System (VFS), MINIX filesystem, RAM filesystem, and file operations. Provides file and directory operations.",
      "required": false,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "fs/vfs.c",
          "fs/minix_fs.c",
          "fs/vfs_simple.c",
          "fs/path.c",
          "fs/chmod.c",
          "fs/ramfs.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "ARCH": {
      "name": "Architecture",
      "description": "Architecture-specific code including GDT, TSS, boot code (x86-64) or ARM-specific initialization.",
      "required": true,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "arch/x86-64/sources/arch_x64.c",
          "arch/x86-64/sources/gdt.c",
          "arch/x86-64/sources/tss_x64.c",
          "arch/x86-64/sources/user_mode.c",
          "arch/x86-64/sources/idt_arch_x64.c",
          "arch/x86-64/sources/fault.c",
          "arch/x86-64/asm/boot_x64.asm",
          "arch/x86-64/asm/syscall_entry_64.asm",
          "arch/common/arch_interface.c",
          "kernel/scheduler/switch/switch_x64.asm"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "LIBRARIES": {
      "name": "Kernel Libraries",
      "description": "Core kernel libraries including VGA, logging, validation, string functions, signals, pipes, and user-space copy utilities. Essential utilities.",
      "required": true,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "includes/ir0/vga.c",
          "includes/ir0/logging.c",
          "includes/ir0/validation.c",
          "includes/ir0/oops.c",
          "includes/ir0/signals.c",
          "includes/ir0/pipe.c",
          "includes/ir0/copy_user.c",
          "includes/string.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "SCHEDULER": {
      "name": "Process Scheduler",
      "description": "Task scheduling algorithms and process switching. Required for multitasking.",
      "required": true,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "kernel/rr_sched.c",
          "kernel/scheduler/switch/switch_x64.asm"
        ],
        "arm32": []
      },
      "dependencies": ["KERNEL"]
    },
    "SERIAL": {
      "name": "Serial Port Driver",
      "description": "Serial port communication driver. Useful for debugging and console output.",
      "required": false,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "drivers/serial/serial.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "PS2_KEYBOARD": {
      "name": "PS/2 Keyboard Driver",
      "description": "PS/2 keyboard input driver with scancode translation and circular buffer. Required for keyboard input.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "interrupt/arch/keyboard.c",
          "drivers/IO/ps2.c"
        ],
        "arm32": []
      },
      "dependencies": ["INTERRUPT"]
    },
    "PS2_MOUSE": {
      "name": "PS/2 Mouse Driver",
      "description": "PS/2 mouse driver with 3/5 button and scroll wheel support. Provides mouse input.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "drivers/IO/ps2_mouse.c"
        ],
        "arm32": []
      },
      "dependencies": ["PS2_KEYBOARD"]
    },
    "VIDEO": {
      "name": "Video Driver",
      "description": "VGA text mode and VBE graphics support. Required for display output.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "drivers/video/vbe.c",
          "drivers/video/typewriter.c",
          "includes/ir0/vga.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "TIMER": {
      "name": "Timer Drivers",
      "description": "Timer drivers including PIT, HPET, LAPIC, and RTC (x86-64) or ARM timer. Required for system timing.",
      "required": false,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "drivers/timer/pit/pit.c",
          "drivers/timer/clock_system.c",
          "drivers/timer/rtc/rtc.c",
          "drivers/timer/hpet/hpet.c",
          "drivers/timer/hpet/find_hpet.c",
          "drivers/timer/lapic/lapic.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "STORAGE": {
      "name": "Storage Drivers",
      "description": "ATA/IDE disk driver and storage device support. Required for disk access.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "drivers/storage/ata.c",
          "drivers/storage/ata_helpers.c",
          "drivers/storage/fs_types.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "AUDIO_SB16": {
      "name": "Sound Blaster 16 Audio",
      "description": "Sound Blaster 16 audio driver with DMA support. Provides 8-bit/16-bit audio playback.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "drivers/audio/sound_blaster.c",
          "drivers/dma/dma.c"
        ],
        "arm32": []
      },
      "dependencies": ["DMA"]
    },
    "AUDIO_ADLIB": {
      "name": "Adlib OPL2 Audio",
      "description": "Adlib OPL2 FM synthesis audio driver. Provides FM synthesis audio output.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "drivers/audio/adlib.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "DMA": {
      "name": "DMA Controller",
      "description": "Direct Memory Access controller driver. Required for high-speed data transfers and audio.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "drivers/dma/dma.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "DISK": {
      "name": "Disk Management",
      "description": "Disk partitioning and storage management. Requires filesystem support.",
      "required": false,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "drivers/disk/partition.c"
        ],
        "arm32": []
      },
      "dependencies": ["FILESYSTEM"]
    },
    "NETWORK": {
      "name": "Network Stack",
      "description": "Core network stack with device and protocol registration. Provides networking abstraction layer.",
      "required": false,
      "architectures": ["x86-64", "arm32"],
      "files": {
        "x86-64": [
          "net/net.c",
          "net/arp.c"
        ],
        "arm32": []
      },
      "dependencies": []
    },
    "NET_E1000": {
      "name": "Intel e1000 Ethernet Driver",
      "description": "Intel e1000 (82540EM) Gigabit Ethernet network adapter driver. Provides network connectivity.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "drivers/net/e1000.c"
        ],
        "arm32": []
      },
      "dependencies": ["NETWORK"]
    },
    "NET_RTL8139": {
      "name": "Realtek RTL8139 Ethernet Driver",
      "description": "Realtek RTL8139 Fast Ethernet network adapter driver. Provides network connectivity.",
      "required": false,
      "architectures": ["x86-64"],
      "files": {
        "x86-64": [
          "drivers/net/rtl8139.c"
        ],
        "arm32": []
      },
      "dependencies": ["NETWORK"]
    }
  },
  "architecture": {
    "layers": [
      {
        "name": "Hardware Layer",
        "subsystems": ["ARCH", "INTERRUPT"],
        "y": 50
      },
      {
        "name": "Memory Layer",
        "subsystems": ["MEMORY"],
        "y": 150
      },
      {
        "name": "Kernel Core",
        "subsystems": ["KERNEL", "LIBRARIES", "SCHEDULER"],
        "y": 250
      },
      {
        "name": "Device Layer",
        "subsystems": ["SERIAL", "PS2_KEYBOARD", "PS2_MOUSE", "VIDEO", "TIMER", "STORAGE", "AUDIO_SB16", "AUDIO_ADLIB", "DMA"],
        "y": 350
      },
      {
        "name": "Network Layer",
        "subsystems": ["NETWORK", "NET_E1000", "NET_RTL8139"],
        "y": 400
      },
      {
        "name": "Storage Layer",
        "subsystems": ["FILESYSTEM", "DISK"],
        "y": 450
      }
    ]
  },
  "profiles": {
    "x86-64-generic": {
      "name": "x86-64 Generic",
      "description": "Full-featured x86-64 kernel with all subsystems enabled",
      "architecture": "x86-64",
      "subsystems": [
        "KERNEL", "MEMORY", "INTERRUPT", "ARCH", "LIBRARIES", "SCHEDULER",
        "FILESYSTEM", "DISK", "SERIAL", "PS2_KEYBOARD", "PS2_MOUSE", "VIDEO", 
        "TIMER", "STORAGE", "AUDIO_SB16", "AUDIO_ADLIB", "DMA", "NETWORK", "NET_E1000", "NET_RTL8139"
      ]
    },
    "x86-64-minimal": {
      "name": "x86-64 Minimal",
      "description": "Minimal x86-64 kernel with only essential subsystems",
      "architecture": "x86-64",
      "subsystems": [
        "KERNEL", "MEMORY", "INTERRUPT", "ARCH", "LIBRARIES", "SCHEDULER"
      ]
    },
    "arm32-generic": {
      "name": "ARM32 Generic",
      "description": "Full-featured ARM32 kernel (port in progress)",
      "architecture": "arm32",
      "subsystems": [
        "KERNEL", "MEMORY", "INTERRUPT", "ARCH", "LIBRARIES", "SCHEDULER",
        "FILESYSTEM", "SERIAL"
      ],
      "enabled": false
    }
  }
}
