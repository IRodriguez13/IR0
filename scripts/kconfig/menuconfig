#!/bin/bash

# Check if Python 3 is installed
if ! command -v python3 &> /dev/null; then
    echo "Error: Python 3 is not installed. Please install it to continue."
    echo "You can install it with: sudo apt update && sudo apt install python3 python3-tk"
    exit 1
fi

# Check if tkinter is installed
if ! python3 -c "import tkinter" 2>/dev/null; then
    echo "Installing required dependencies..."
    if command -v apt-get &> /dev/null; then
        sudo apt-get update && sudo apt-get install -y python3-tk
    elif command -v yum &> /dev/null; then
        sudo yum install -y python3-tk
    else
        echo "Could not determine package manager."
        echo "Please install 'python3-tk' or 'python-tk' manually."
        exit 1
    fi
fi

# Run the configuration menu
echo "Starting configuration menu..."
python3 tools/kconfig/tkconfig.py

# Show confirmation message
echo ""
echo "Configuration saved to .config"
echo "You can review the generated .config file"
echo ""

exit 0
